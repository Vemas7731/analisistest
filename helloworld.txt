#hilangin outlier 
sebelumoutlier = df_allstation.shape[0]
q1 = (df_allstation['PM2.5'].quantile(0.25))
q3 = (df_allstation['PM2.5'].quantile(0.75))
iqr = q3-q1

maximum = q3 + (1.5*iqr)
minimum = q1 - (1.5*iqr)

kondisi_lower_than = df_allstation['PM2.5'] < minimum
kondisi_more_than = df_allstation['PM2.5'] > maximum

df_allstation.drop(df_allstation[kondisi_lower_than | kondisi_more_than].index, inplace=True)
setelahoutlier = df_allstation.shape[0]
outliertereliminasi = sebelumoutlier - setelahoutlier

print('Jumlah Outlier yang Dibuang : ', outliertereliminasi)


#scatterplot korelasi kecepatan angin dan tingkat polusi
sns.regplot(x='WSPM', y='PM2.5', data=df_allstation, scatter_kws={"color": "blue"}, line_kws={"color": "red"})
plt.title('Korelasi Kecepatan Angin dengan Tingkat PM2.5', fontsize=14)  
plt.xlabel('Kecepatan Angin (WSPM)', fontsize=12) 
plt.ylabel('Konsentrasi PM2.5', fontsize=12) 
plt.grid(True) 
plt.tight_layout()  
plt.show()

#scatterplot korelasi hujan dan tingkat polusi
sns.regplot(x='RAIN', y='PM2.5', data=df_allstation, scatter_kws={"color": "blue"}, line_kws={"color": "red"})
plt.title('Korelasi Hujan dengan Tingkat PM2.5', fontsize=14)  
plt.xlabel('Jumlah Hujan (RAIN)', fontsize=12) 
plt.ylabel('Konsentrasi PM2.5', fontsize=12) 
plt.grid(True) 
plt.tight_layout()  
plt.show()